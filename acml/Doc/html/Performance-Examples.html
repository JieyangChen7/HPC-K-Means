<html lang="en">
<head>
<title>Performance Examples - AMD Core Math Library (ACML) 5.3.1</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="AMD Core Math Library (ACML) 5.3.1">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="General.html#General" title="General">
<link rel="prev" href="Examples.html#Examples" title="Examples">
<link rel="next" href="ACML-Memory-Usage.html#ACML-Memory-Usage" title="ACML Memory Usage">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<div class="node">
<a name="Performance-Examples"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="ACML-Memory-Usage.html#ACML-Memory-Usage">ACML Memory Usage</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Examples.html#Examples">Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="General.html#General">General</a>
<hr>
</div>

<h3 class="section">2.9 Example ACML programs demonstrating performance</h3>

<p><a name="index-performance-example-programs-36"></a><a name="index-ACML-performance-examples-37"></a>
The /examples/performance subdirectory of the top ACML installation directory
(for example, possible default locations are
/opt/acml5.3.1/pgi64/examples/performance
under Linux, or
c:\acml5.3.1\win64\examples\performance
under windows) contains several timing programs designed to show the performance of
ACML when running on your machine. 
Again, a GNUmakefile may be used to build and run them.

   <p>Depending on where your copy of the ACML is installed, and which
compiler and flags you wish to use, it may be necessary to modify
some variables in the GNUmakefile before using it.

   <p>The 64-bit Windows versions of ACML assume that you have the
Cygwin UNIX-like tools installed, and can use the <em>make</em>
command that comes with them to build the examples.

   <p>In addition, the GNUmakefile uses the gnuplot plotting program
to display graphs of the timing results. If you do not have gnuplot installed,
the timing programs will still run and show their results,
but you will see no graph plots. Under linux, gnuplot may come
with your linux distribution, but you may need to explicitly ask for it
to be installed. Note that version 4.0 or later of gnuplot is required.

   <p>The gnuplot program is also available for Windows machines. See
<a href="http://www.gnuplot.info">http://www.gnuplot.info</a> for more information.

   <p>If you are on an SMP (multiprocessor) machine and have installed an OpenMP
version of the ACML, then in the examples/performance directory
a command such as

<pre class="example">      % make OMP_NUM_THREADS=5
</pre>
   <p>will run the timing programs on P processors, where P = 1, 2, 4, 5; i.e.,
P equals an integer power of 2 and also equals <var>OMP_NUM_THREADS</var> if this value
is not a power of 2. The results for a particular routine are concatenated into
one file. gnuplot then shows on one graph for each routine the results of
varying the number of processors for that routine.

   <p>Setting <var>OMP_NUM_THREADS</var> in this way is not useful if you are not
on an SMP machine or are not using an OpenMP version of ACML. 
Neither is it useful to set <var>OMP_NUM_THREADS</var> to a value higher than
the number of processors (or processor cores) on your machine. A
way to find the number of processors (or cores) under linux is
to examine the special file /proc/cpuinfo which has an entry for
every core.

   <p>Not all routines in ACML are SMP parallelized,
so in this context the <var>OMP_NUM_THREADS</var> setting only applies to
those examples, including time_cfft2d.f90, time_dgemm.f90 and time_dgetrf.f90,
which are for parallelized routines. The other timing programs run
on one thread regardless of the setting of <var>OMP_NUM_THREADS</var>.

   <p>In all cases, timing graphs can be viewed without regenerating timing
results by typing the command

<pre class="example">      % make plots
</pre>
   <p>Note that all results generated by timing programs will vary depending
on the load on your machine at run time.

   </body></html>

